System.register("chunks:///_virtual/DecorCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var o,t,n,i,r,a,c,l,s,d,h,m,g,u,p,C;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,l=e.ScrollView,s=e.find,d=e.Vec3,h=e.Sprite,m=e.Color,g=e.UITransform,u=e.Component},function(e){p=e.GameManager,C=e.NameSound}],execute:function(){var f,v,T,I,b,y,M,B,_,w,x,D,S,F,P,U,W,E,k;r._RF.push({},"5ca540BOJ5AFoL+y5Ejnv8H","DecorCtrl",void 0);var H=a.ccclass,L=a.property;e("DecorCtrl",(f=H("DecorCtrl"),v=L(c),T=L(c),I=L(c),b=L(c),y=L(c),M=L(c),B=L(c),_=L(l),f((D=o((x=function(e){function o(){for(var o,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return o=e.call.apply(e,[this].concat(r))||this,n(o,"containChoooseCard",D,i(o)),n(o,"containBowTie",S,i(o)),n(o,"containItem",F,i(o)),n(o,"nodeCard",P,i(o)),n(o,"nodeBowTie",U,i(o)),n(o,"nodeItemMove",W,i(o)),n(o,"nodeImgCam",E,i(o)),n(o,"nodeScroll",k,i(o)),o._canMoveItem=!1,o._countItem=0,o._gameMgr=void 0,o._itemDecor=null,o._basePos=void 0,o}t(o,e);var r=o.prototype;return r.start=function(){globalThis.decor=this,this._gameMgr=s("Canvas").getComponent(p),this.node.on(c.EventType.TOUCH_START,this.onTouchStart.bind(this)),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancel.bind(this)),this.setupNodeCard(),this.setupNodeBowTie(),this.setupItemDecorClicked()},r.onTouchStart=function(e){this._itemDecor=null;var o=this.checkItemDecor(e.getUILocation());o&&(this._basePos=new d(e.getUILocation().x,e.getUILocation().y),this._itemDecor=o)},r.setupNodeCard=function(){for(var e=0;e<this.containChoooseCard.children.length;e++){var o=this.containChoooseCard.children[e].getChildByName("bubble");o&&o.on(c.EventType.TOUCH_START,this.onItemCardClicked.bind(this))}},r.onItemCardClicked=function(e){var o=e.currentTarget;this.nodeCard.getComponent(h).spriteFrame=o.getComponent(h).spriteFrame,this._gameMgr.runSound(C.Click);for(var t=0;t<this.containChoooseCard.children.length;t++){var n=this.containChoooseCard.children[t].getChildByName("bubble");o.parent.name==n.parent.name?n.parent.getComponent(h).color=(new m).fromHEX("#a5b181"):n.parent.getComponent(h).color=(new m).fromHEX("#ffffff")}},r.setupNodeBowTie=function(){for(var e=0;e<this.containBowTie.children.length;e++){var o=this.containBowTie.children[e].getChildByName("bubble");o&&o.on(c.EventType.TOUCH_START,this.onItemBowTieClicked.bind(this))}},r.onItemBowTieClicked=function(e){this._gameMgr.runSound(C.Click);var o=e.currentTarget;this.nodeBowTie.getComponent(h).spriteFrame=o.getComponent(h).spriteFrame;for(var t=0;t<this.containBowTie.children.length;t++){var n=this.containBowTie.children[t].getChildByName("bubble");o.parent.name==n.parent.name?n.parent.getComponent(h).color=(new m).fromHEX("#a5b181"):n.parent.getComponent(h).color=(new m).fromHEX("#ffffff")}},r.setupItemDecorClicked=function(){for(var e=0;e<this.containItem.children.length;e++){var o=this.containItem.children[e].getChildByName("icon");o.on(c.EventType.TOUCH_START,this.onTouchStartItem.bind(this)),o.on(c.EventType.TOUCH_END,this.onTouchCancelItemDecor.bind(this))}},r.onTouchStartItem=function(e){this._gameMgr.runSound(C.Click),this.nodeItemMove.getComponent(h).spriteFrame=e.currentTarget.getComponent(h).spriteFrame,this.nodeScroll.enabled=!1,this.nodeItemMove.setWorldPosition(new d(e.getUILocation().x,e.getUILocation().y))},r.onTouchCancelItemDecor=function(e){this.nodeItemMove.getComponent(h).spriteFrame=null},r.onTouchMove=function(e){if(this._canMoveItem){console.log(this.nodeCard.getComponent(g).getBoundingBoxToWorld(),this.nodeCard.getComponent(g).contentSize),this._canMoveItem=!1;var o=e.getUILocation();if(this.nodeItemMove.setWorldPosition(new d(o.x,o.y)),this._itemDecor){var t=this._itemDecor.getComponent(g).getBoundingBoxToWorld(),n=this.nodeCard.getComponent(g).getBoundingBoxToWorld();t.intersects(n)?this._itemDecor.setWorldPosition(new d(e.getUILocation().x,e.getUILocation().y)):(this._itemDecor.setWorldPosition(this._basePos),this._itemDecor=null)}}},r.onTouchCancel=function(e){if(this.nodeScroll.enabled=!0,null!=this.nodeItemMove.getComponent(h).spriteFrame){var o=this.nodeCard.getComponent(g).getBoundingBoxToWorld(),t=this.nodeItemMove.getComponent(g).getBoundingBoxToWorld();if(!o.intersects(t))return void(this.nodeItemMove.getComponent(h).spriteFrame=null);var n=new c;n.addComponent(h).spriteFrame=this.nodeItemMove.getComponent(h).spriteFrame,n.parent=this.nodeCard,n.scale=new d(.7,.7),n.setWorldPosition(this.nodeItemMove.getWorldPosition());for(var i=0;i<this.containItem.children.length;i++){var r=this.containItem.children[i].getChildByName("icon");n.getComponent(h).spriteFrame.name==r.getComponent(h).spriteFrame.name&&(r.parent.getComponent(h).color=(new m).fromHEX("#a5b181"))}this._countItem++,this._countItem>=5?this.nodeImgCam.active=!0:this.nodeImgCam.active=!1;var a=[2,3,4];this._gameMgr.runSound(a[Math.floor(Math.random()*a.length)])}if(this.nodeItemMove.getComponent(h).spriteFrame=null,this._itemDecor){var l=this.nodeCard.getComponent(g).getBoundingBoxToWorld(),s=this._itemDecor.getComponent(g).getBoundingBoxToWorld();console.log(this.nodeCard.getWorldPosition(),this._itemDecor.getWorldPosition()),console.log(l.xMin,l.xMax,l.yMin,l.yMax,l.size),console.log(s.xMin,s.xMax,s.yMin,s.yMax,s.size),l.intersects(s)?this._itemDecor.setWorldPosition(new d(e.getUILocation().x,e.getUILocation().y)):this._itemDecor.setWorldPosition(this._basePos)}},r.checkItemDecor=function(e){for(var o=0;o<this.nodeCard.children.length;o++)if(this.nodeCard.children[o]&&this.nodeCard.children[o].getComponent(h).spriteFrame){var t=this.nodeCard.children[o].getComponent(g).getBoundingBoxToWorld();if(this.checkPosInBoundingBox(e,t))return this.nodeCard.children[o]}return null},r.checkPosInBoundingBox=function(e,o){return e.x>=o.xMin&&e.x<=o.xMax&&e.y>=o.yMin&&e.y<=o.yMax},r.update=function(e){this._canMoveItem=!0},o}(u)).prototype,"containChoooseCard",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=o(x.prototype,"containBowTie",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=o(x.prototype,"containItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=o(x.prototype,"nodeCard",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=o(x.prototype,"nodeBowTie",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=o(x.prototype,"nodeItemMove",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=o(x.prototype,"nodeImgCam",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=o(x.prototype,"nodeScroll",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=x))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,r,i,a,l,c,d,u,s,h,p,C,m,b,f,g,S,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Node,c=e.AudioClip,d=e.Camera,u=e.Button,s=e.RenderTexture,h=e.view,p=e.SpriteFrame,C=e.UITransform,m=e.Sprite,b=e.Vec3,f=e.tween,g=e.director,S=e.AudioSource,y=e.Component}],execute:function(){var v,D,w,z,B,G,E,I,_,N,F,O,k,x,R,T,A,L,M,U,V,H,P,j,$,q,J,K,Q,W,X,Y,Z,ee,ne,te,oe,re,ie;i._RF.push({},"5e7b1S2ozpOlblLeLrnL7Uv","GameManager",void 0);var ae=a.ccclass,le=a.property,ce=(e("GameManager",(v=ae("GameManager"),D=le(l),w=le(l),z=le(l),B=le(l),G=le(l),E=le(l),I=le(l),_=le(l),N=le(l),F=le(l),O=le(l),k=le(l),x=le(l),R=le(l),T=le(l),A=le(l),L=le(c),M=le(d),v((H=n((V=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,o(n,"nodeChooseCard",H,r(n)),o(n,"nodeDecorCard1",P,r(n)),o(n,"nodeDecorCard2",j,r(n)),o(n,"nodeDecorCard3",$,r(n)),o(n,"nodeFinalDecor",q,r(n)),o(n,"nodeScreenShot",J,r(n)),o(n,"picture",K,r(n)),o(n,"targetSprite",Q,r(n)),o(n,"nodeBack",W,r(n)),o(n,"flash",X,r(n)),o(n,"nodeEndGame",Y,r(n)),o(n,"nodeImgCam",Z,r(n)),o(n,"nodeBgEndGame",ee,r(n)),o(n,"nodeRootUIEndGame",ne,r(n)),o(n,"listStar",te,r(n)),o(n,"nodeContainSound",oe,r(n)),o(n,"listSound",re,r(n)),o(n,"cam",ie,r(n)),n._cardChoosen=1,n._countStar=3,n}t(n,e);var i=n.prototype;return i.start=function(){this.nodeChooseCard.active=!0,this.nodeDecorCard1.active=!1,this.nodeDecorCard2.active=!1,this.nodeDecorCard3.active=!1,this.nodeScreenShot.active=!1,this.runSound(ce.ChooseCard)},i.chooseDecor=function(e,n){this.nodeChooseCard.active=!1,this._cardChoosen=n,1==n?this.nodeDecorCard1.active=!0:2==n?this.nodeDecorCard2.active=!0:3==n&&(this.nodeDecorCard3.active=!0),this.runSound(ce.ChooseDecor)},i.btnShot=function(){this.nodeScreenShot.active=!0,1==this._cardChoosen?this.nodeDecorCard1.getChildByName("nodeDecorCard").parent=this.nodeFinalDecor:2==this._cardChoosen?this.nodeDecorCard2.getChildByName("nodeDecorCard").parent=this.nodeFinalDecor:3==this._cardChoosen&&(this.nodeDecorCard3.getChildByName("nodeDecorCard").parent=this.nodeFinalDecor),this.nodeDecorCard1.active=!1,this.nodeDecorCard2.active=!1,this.nodeDecorCard3.active=!1,this.nodeImgCam.active=!0,this.nodeImgCam.getComponent(u).interactable=!1,this.btnShotImage()},i.btnShotImage=function(){var e=this;this.flash.active=!0,this.scheduleOnce((function(){e.flash.active=!1,e.nodeBack.active=!1;var n=new s;n.reset(h.getVisibleSize()),e.cam.targetTexture=n;var t=new p;t.texture=n,e.targetSprite.getComponent(C).contentSize=h.getVisibleSize(),e.targetSprite.getComponent(m).spriteFrame=t,e.targetSprite.scale=new b(1,1,0),console.log("[ACTION]: SCREENSHOT"),e.scheduleOnce((function(){e.cam.targetTexture=null}),0),e.scheduleOnce((function(){e.picture.active=!0}),0),e.scheduleOnce(e.onGameEnd.bind(e),3),e.scheduleOnce((function(){e.targetSprite.scale=new b(.8,.8),e.nodeBack.active=!0}),1)}),.05)},i.onGameEnd=function(){var e=this;this.nodeEndGame.active=!0,this.nodeBgEndGame.scale=new b(0,0,0),f(this.nodeBgEndGame).to(.5,{scale:new b(1,1,1)}).call((function(){})).start(),f(this.nodeRootUIEndGame).to(1,{scale:new b(1,1,1)}).call((function(){for(var n=0;n<e._countStar;n++){var t=e.listStar[n].children[0];f(t).delay(.9*n).call((function(){e.runSound(ce.Star)})).to(.5,{scale:new b(1,1,1)}).to(.2,{scale:new b(1.1,1.1,1.1)}).to(.2,{scale:new b(1,1,1)}).start()}})).start()},i.playAgain=function(){g.loadScene("main")},i.runSound=function(e){if(0!=e){var n=this.nodeContainSound.getChildByName("$"+e);n&&n.destroy(),1==e&&this.nodeContainSound.getChildByName("0")&&this.nodeContainSound.getChildByName("0").destroy(),(n=new l).name=e+"",n.parent=this.nodeContainSound,n.addComponent(S),n.getComponent(S).clip=this.listSound[e],n.getComponent(S).play()}},n}(y)).prototype,"nodeChooseCard",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=n(V.prototype,"nodeDecorCard1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=n(V.prototype,"nodeDecorCard2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=n(V.prototype,"nodeDecorCard3",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=n(V.prototype,"nodeFinalDecor",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=n(V.prototype,"nodeScreenShot",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=n(V.prototype,"picture",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(V.prototype,"targetSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(V.prototype,"nodeBack",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(V.prototype,"flash",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(V.prototype,"nodeEndGame",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(V.prototype,"nodeImgCam",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=n(V.prototype,"nodeBgEndGame",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(V.prototype,"nodeRootUIEndGame",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(V.prototype,"listStar",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=n(V.prototype,"nodeContainSound",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(V.prototype,"listSound",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=n(V.prototype,"cam",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=V))||U)),e("NameSound",function(e){return e[e.ChooseCard=0]="ChooseCard",e[e.ChooseDecor=1]="ChooseDecor",e[e.Beautifull=2]="Beautifull",e[e.Great=3]="Great",e[e.Excellent=4]="Excellent",e[e.Star=5]="Star",e[e.Click=6]="Click",e}({})));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DecorCtrl.ts","./GameManager.ts","./ScaleCtrl.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ScaleCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,l,o,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,l=e.screen,o=e.Vec3,s=e.view,c=e.Component}],execute:function(){var r;i._RF.push({},"ec95c0UPBJLf50GRulLsQJF","ScaleCtrl",void 0);var a=n.ccclass;n.property,e("ScaleCtrl",a("ScaleCtrl")(r=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).globalScale=1,t}t(i,e);var n=i.prototype;return n.start=function(){this.handleMultiRes(),l.on("window-resize",this.onWindowResize.bind(this)),this.onWindowResize()},n.onWindowResize=function(){this.handleMultiRes(),this.node.scale=new o(this.globalScale,this.globalScale,1)},n.handleMultiRes=function(){var e=l.windowSize,t=s.getDesignResolutionSize(),i=e.width/e.height,n=t.width/t.height;i>n&&(this.globalScale=n/i)},i}(c))||r);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});